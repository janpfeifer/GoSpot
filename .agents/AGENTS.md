# GoSpot - AI Coding Assistant Guidelines (Antigravity)

## Project Overview
GoSpot is a real-time, multiplayer web game inspired by "Dobble" / "Spot It!". 
Players compete to find the single matching symbol between two circular cards. 
The project is written entirely in Go, utilizing WebAssembly (Wasm) for the frontend, allowing us to share game state and logic structs between the server and the client.

## Tech Stack
* **Backend Server:** Pure Go (Standard library `net/http`, plus WebSockets for multiplayer state).
* **Frontend UI (Lobby/Login):** `github.com/maxence-charriere/go-app` (compiles to Wasm, handles DOM manipulation and PWA routing).
* **Frontend Game Engine:** `github.com/hajimehoshi/ebiten/v2` (Ebitengine, compiles to Wasm, drives the HTML5 Canvas for rendering rotating symbols and handling click hitboxes).
* **CSS Framework:** Pico CSS (Classless CSS, vendored locally in `web/css/pico.min.css` to style standard HTML elements generated by `go-app`).

## Directory Structure & Build Targets
This repository produces TWO binaries. You must strictly respect the separation of concerns to avoid importing Wasm-only packages into the server, or server-only packages (like heavy DB drivers) into the Wasm client.

* `cmd/server/`: The backend entry point. Runs the HTTP/WebSocket server and serves the `web/` directory.
* `cmd/wasm/`: The frontend entry point. Built strictly with `GOOS=js GOARCH=wasm`. Mounts the `go-app` UI and initializes Ebitengine.
* `internal/game/`: Shared logic. Contains pure Go code (e.g., `GameState`, deck generation math, rules). Imported by both server and wasm.
* `internal/lobby/`: Frontend UI logic. Contains `go-app` components.
* `internal/engine/`: Frontend game rendering. Contains Ebitengine Canvas logic.
* `web/`: Static assets (`index.html`, `css/pico.min.css`, `images/`, and the `.gitignore`'d `app.wasm`).

## Crucial Architectural Rules
1.  **Legal / Naming:** Do NOT use the words "Dobble" or "Spot It" anywhere in the source code, variables, or UI. Use "GoSpot", "Deck", "Card", and "Symbol".
2.  **go-app vs. Ebitengine Transition:** `ebiten.RunGame()` is a blocking loop. The frontend must handle the transition from the `go-app` DOM UI (lobby) to the Ebitengine canvas gracefully without freezing the browser's main thread.
3.  **Deck Generation:** The deck must be generated using the math of a finite projective plane to ensure every card shares exactly one symbol with every other card.
4.  **No Wasm Bloat:** Do not add large third-party UI libraries. Rely on standard `go-app` HTML components styled naturally by Pico CSS.

## Standard Commands
* **Build Wasm:** `GOOS=js GOARCH=wasm go build -o web/app.wasm ./cmd/wasm`
* **Build Server:** `go build -o bin/server ./cmd/server`
